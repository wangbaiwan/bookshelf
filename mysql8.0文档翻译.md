---
title: mysql8.0文档翻译
tags: mysql
---
[toc]
# 第一章 概览
## 1.1 关于这个文档
## 1.2 排版和语法约定
## 1.3 Mysql数据库管理系统概述
## 1.4 Mysql8.0新特性
## 1.5 Mysql8.0中添加、弃用和移除的服务器和状态变量以及操作
## 1.6 更多Mysql信息
## 1.7 如何反馈bug和问题
## 1.8 Mysql遵循的标准
## 1.9 致谢
# 第二章 安装和更新
## 2.1 安装指导
## 2.2 在Unix/Linux上使用二进制文件安装
## 2.3 在Windows上安装
## 2.4 在macOS上安装
## 2.5 在Linux上安装
## 2.6 使用ULN安装（Unbreakable Linux Network）
## 2.7 在Solaris上安装
## 2.8 在FreeBSD上安装
## 2.9 通过源码安装
## 2.10 安装后的工作与测试
## 2.11 升级Mysql
## 2.12 降级Mysql
## 2.13 Perl安装说明
# 第三章 教程
本章通过展示如何使用mysql客户端程序创建和使用一个简单数据库，来提供MySQL的教程介绍。mysql（有时称为“终端监视器”或只是“监视器”）是一个交互式程序，你可以连接到MySQL服务器，运行查询和查看结果。 mysql也可以在批处理模式下使用，事先将查询放在文件中，然后告诉mysql执行文件的内容。这两种使用方法都会在下文中介绍。

要查看mysql提供的选项列表，请使用--help选项调用它：
```shell
> mysql --help
```
本章假设你已安装了mysql，并且你可以连接MySQL服务器。如果不是这样，请联系你的MySQL管理员。 （如果你是管理员，请参看手册的相关部分，例如第5章，MySQL服务器管理。）

本章介绍了设置和使用数据库的整个过程。如果你只对访问现有数据库感兴趣，则可能需要跳过描述如何创建数据库及其包含的表的部分。

因为本章本质上是教程，所以必须省略许多细节。有关此处所涉及主题的更多信息，请参阅手册的相关章节。
## 3.1 连接和断开服务器
要连接到服务器，通常需要在调用mysql时提供MySQL用户名，一般还需要密码。 如果服务器在登录的计算机以外的计算机上运行，则还需要指定主机名。 请从管理员那获取接参数进行连接（即，要使用的主机，用户名和密码）。 一旦知道了正确的参数，就应该能够像这样连接：
```shell
> mysql -h host -u user -p
Enter password:********
```
***host*** 和 ***user*** 分别代表Mysql服务器的主机名和你的Mysql账号用户名，请用你自己的值代替。********代表你的密码，当显示 **Enter password:** 时输入。

如果一切顺利，你可以看到一些介绍信息，以及 **mysql>** 提示符：
```shell
> mysql -h host -u user -p
Enter password: ********
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 25338 to server version: 8.0.17-standard

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql>
```

**mysql>** 提示符是告诉你mysql已经准备好输入SQL语句了

如果你在运行MySQL的同一台计算机上登录，则可以省略主机，只需使用以下命令：
```shell
> mysql -u user -p
```

当你尝试登录，得到一条类似 **ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)** 的提示，这意味着MySQL服务器 守护程序（Unix）或服务（Windows）未运行。请咨询管理员或参阅第2章“安装和升级MySQL”中你操作系统对应的内容。

如果登录过程中遇到其他问题，参看第B.6.2节“使用MySQL程序时的常见错误”。

某些MySQL安装允许用户以匿名（未命名）用户身份连接到本地主机上运行的服务器。 如果你的机器上是这种情况，你应该可以通过调用没有任何选项的mysql连接到该服务器：
```shell
> mysql
```

成功连接后，你可以随时在 **mysql>** 提示符下键入 **QUIT** （或 **\ q** ）来断开连接：
```shell
mysql> QUIT
Bye
```

在Unix上，你也可以通过按Control + D断开连接。

后续章节中大多数示例都假定你已连接到服务器。 它们通过 **mysql>** 提示符表明这一点。

## 3.2 输入查询
确保你已如上一节中所述那样连接到服务器。 这样做本身并不会选择任何可以使用的数据库，但没关系。 此时，找到一些关于如何发起查询，比直接创建表，加载数据以及从中检索数据更为重要。 本节介绍了输入查询的基本原则，你可以尝试下面的几个查询来熟悉mysql的工作原理。

这是一个简单的查询，获取服务器告的版本号和当前日期。 在 **mysql>** 提示符后面输入如下所示，然后按Enter键：
```shell
mysql> SELECT VERSION(), CURRENT_DATE;
+-----------+--------------+
| VERSION() | CURRENT_DATE |
+-----------+--------------+
| 5.8.0-m17 | 2015-12-21   |
+-----------+--------------+
1 row in set (0.02 sec)
mysql>
```
这个查询说明了关于mysql的一些特点：

查询通常由一个SQL语句后跟一个分号组成。 （有一些例外，可以省略分号。前面提到的QUIT就是其中之一。我们稍后会找到其他的例子。）

+ 当你发出查询时，mysql将其发送到服务器执行并显示结果，然后打印另一个mysql>提示符以指示它已准备好进行另一个查询。

+ mysql以表格形式（行和列）显示查询输出。第一行包含列的标签。接下来的行是查询结果。通常，列标签是从数据库表中提取的列的名称。如果要检索表达式的值而不是表列（如刚刚显示的示例中所示），则mysql使用表达式本身标记列。

+ mysql显示返回了多少行以及执行查询所需的时间，这使你可以大致了解服务器性能。这些值不精确，因为它们代表挂钟时间（wall clock time，不是CPU或机器时间），且它们受服务器负载和网络延迟等因素的影响。（为简洁起见，本章其余示例中有时未显示“行中的行”行。）

关键字的大小写可以随意输入。以下查询是等效的：
```shell
mysql> SELECT VERSION(), CURRENT_DATE;
mysql> select version(), current_date;
mysql> SeLeCt vErSiOn(), current_DATE;
```

这是另一个查询。 它演示了你可以将mysql用作简单的计算器：
```shell
mysql> SELECT SIN(PI()/4), (4+1)*5;
+------------------+---------+
| SIN(PI()/4)      | (4+1)*5 |
+------------------+---------+
| 0.70710678118655 |      25 |
+------------------+---------+
1 row in set (0.02 sec)
```

到目前为止显示的查询是相对较短的单行语句。 你甚至可以在一行中输入多个语句。 用分号结束每一个：
```shell
mysql> SELECT VERSION(); SELECT NOW();
+-----------+
| VERSION() |
+-----------+
| 8.0.13    |
+-----------+
1 row in set (0.00 sec)

+---------------------+
| NOW()               |
+---------------------+
| 2018-08-24 00:56:40 |
+---------------------+
1 row in set (0.00 sec)
```
不需要冗长查询全写在在一行上，分成多行查询不是问题。 mysql通过查找终止分号来确定语句的结束位置，而不是查找输入行的结尾。 （换句话说，mysql接受自由格式输入：它收集输入行但在看到分号之前不执行它们。）

这是一个简单的多行语句：
```shell
mysql> SELECT
    -> USER()
    -> ,
    -> CURRENT_DATE;
+---------------+--------------+
| USER()        | CURRENT_DATE |
+---------------+--------------+
| jon@localhost | 2018-08-24   |
+---------------+--------------+
```

在此示例中，请注意在输入多行查询的第一行后，提示符是如何从 **mysql>** 更改为 **- >** 的。 这就是mysql表明它还没有看到完整的声明的方式，并且正在等待其余的声明。 提示符是你的好友，因为它提供了有价值的反馈。 如果您使用该反馈，您始终可以了解mysql正在等待什么。

如果您决定不想执行正在输入的查询，请通过键入 **\ c** 取消它：
```shell
mysql> SELECT
    -> USER()
    -> \c
mysql>
```

也请注意这里的提示符。 键入\ c后，它会切换回mysql>，提供反馈以指示mysql已为新查询做好准备。
下表显示了您可能看到的每个提示，并总结了它们所代表的mysql状态。
Prompt | Meaning
-------- | --------
mysql> | 准备接受一个新查询
-> | 等待多行查询中的下一行
'> | 等待下一行完成'开头的字符串
"> | 等待下一行完成"开头的字符串
\`> | 等待下一行完成\`开头的标识符
/\*> |等待下一行完成/\*开头的注释

当您打算在一行上发出查询，但忘记了终止分号时，通常会出现多行语句。 在这种情况下，mysql等待更多输入：
```shell
mysql> SELECT USER()
    ->
```

如果你遇到这种情况（你认为你已经输入了一个语句，但唯一的响应是 **- >** 提示符），很可能mysql正在等待分号。 如果您没有注意到提示告诉您的内容，您可能会在那里坐一会儿，然后才意识到您需要做什么。 输入分号以完成语句，mysql执行它：
```shell
mysql> SELECT USER()
    -> ;
+---------------+
| USER()        |
+---------------+
| jon@localhost |
+---------------+
```

在字符串收集期间出现 **'>** 和 **">** 提示（另一种说法是MySQL正在等待字符串的完成）。在MySQL中，您可以编写由 **'** 或 **"** 字符包围的字符串（例如，'hello'或"goodbye"），mysql允许你输入跨越多行的字符串。 当您看到 **'>** 或 **">** 提示符时，表示您输入的行包含以 **'** 或 **"** 引号字符开头的字符串，但尚未输入终止字符串的匹配引号。 这通常表明您无意中遗漏了引号字符。 例如：
```shell
mysql> SELECT * FROM my_table WHERE name = 'Smith AND age < 30;
    '>
```

如果输入这个SELECT语句，按Enter键并等待结果，却没有任何反应。 我们应该请注意'>提示提供的线索，而不是想知道为什么这个查询花了这么长时间。 它告诉你mysql希望看到未终止的字符串的其余部分。 （您是否在语句中看到错误？字符串'Smith缺少第二个单引号。）

这种情况你该怎么办呢？ 最简单的方法是取消查询。 然而这种情况下，您不能只键入\ c，因为mysql会将其解释为它正在收集的字符串的一部分。 应该输入结束引号字符（所以mysql知道你已经完成了字符串），然后键入\ c：
```shell
mysql> SELECT * FROM my_table WHERE name = 'Smith AND age < 30;
    '> '\c
mysql>
```

提示符变回mysql>，表示mysql已准备好进行新查询。

**\`>** 提示符类似于 **'>** 和 **">** 提示符，但表示您已经开始但未完成反引号引用的标识符。

知道 **'>**，**">** 和 **\`>** 提示符号是什么含义很重要，因为如果你错误地输入了一个未终止的字符串，你键入的任何其他行似乎都会被mysql忽略——即使是一行包含QUIT的行。如果您不知道在取消当前查询之前终止引用，这可能是相当的 令人困惑。

> **注意**
> 为了提供便于练习用的复制粘贴的语句，本章以后的多行查询都将不再显示提示符（ **->** 或其他）

## 3.3 创建和使用数据库
当你知道如何输入SQL语句时，就可以访问数据库了。

假设你家里有几只宠物（你的小动物园），你希望能跟踪他们的各种信息。你可以通过建表来保存数据并加载你需要的数据。然后，你能通过检索表格中的数据来回答关于你宠物的问题。本章将介绍一下操作：

+ 创建一个数据库
+ 创建一张表
+ 将数据加载到表中
+ 以各种方式从表中检索数据
+ 使用多个表

小动物数据库很简单（我们故意的），但是并不难联想到类似数据库的真实使用场景。例如，农民可以使用这样的数据库来跟踪牲畜，或者是兽医跟踪患者记录。你能在MySQL的网站上找到一个包含了一些查询和简单数据小动物园版本。你能在 https://dev.mysql.com/doc/ 上找到Zip和tar两种版本。

使用 <u>**SHOW**</u> 来显示当前服务器上的数据库：
```shell
mysql> SHOW DATABASES;
+----------+
| Database |
+----------+
| mysql    |
| test     |
| tmp      |
+----------+
```

mysql数据库描述了用户访问权限。test数据库通常作为用户实验的工作区。

这里表明的数据库列表可能和你机器上的不一样；你无法通过<u> **SHOW DATABASES** </u>看到你没有<u> **SHOW DATABASES** </u>权限的数据库。参看章节13.7.6.14，“SHOW DATABASES语法”。

如果存在test数据库，请尝试访问它：
```shell
mysql> USE test
Database changed
```

<u> **USE** </u>，和 **QUIT**类似，不需要分号。（你也可以通过分号终止这个语句；这没有坏处）<u> **USE** </u>语句也有特殊的地方：该语句必须在同一行上。

你可以使用测试数据来完成后面的示例（如果你有权访问它），但是你在数据库中创建的任何内容都可以被有权访问它的任何人删除。因此，你可能需要你的MySQL管理员允许i使用自己的数据库。假设你需要访问你的小动物园。管理员需要执行如下语句：
```shell
mysql> GRANT ALL ON menagerie.* TO 'your_mysql_name'@'your_client_host';
```
其中your_mysql_name是分配给您的MySQL用户名，your_client_host是连接到服务器的主机。
### 3.3.1 创建和选择数据库
### 3.3.2 创建表
### 3.3.3 将数据加载到表中
### 3.3.4 从表中检索信息
## 3.4 获取有关数据库和表的信息
## 3.5 在批处理模式下使用mysql
## 3.6 常见查询示例
## 3.7 在Apache中使用MySQL

